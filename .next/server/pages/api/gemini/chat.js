"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/gemini/chat";
exports.ids = ["pages/api/gemini/chat"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@google/genai":
/*!********************************!*\
  !*** external "@google/genai" ***!
  \********************************/
/***/ ((module) => {

module.exports = import("@google/genai");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgemini%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgemini%5Cchat.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgemini%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgemini%5Cchat.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_gemini_chat_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\gemini\\chat.ts */ \"(api)/./pages/api/gemini/chat.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_gemini_chat_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_gemini_chat_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_gemini_chat_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_gemini_chat_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/gemini/chat\",\n        pathname: \"/api/gemini/chat\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_gemini_chat_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmdlbWluaSUyRmNoYXQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2dlbWluaSU1Q2NoYXQudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDMEQ7QUFDMUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHNEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxzREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91bmlzb2NpYWwtLS3lpKflrabnlJ/npL7kuqTnp4HmlZkvPzI4NGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxnZW1pbmlcXFxcY2hhdC50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2dlbWluaS9jaGF0XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ2VtaW5pL2NoYXRcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgemini%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgemini%5Cchat.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/gemini/chat.ts":
/*!**********************************!*\
  !*** ./pages/api/gemini/chat.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _google_genai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/genai */ \"@google/genai\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_google_genai__WEBPACK_IMPORTED_MODULE_0__]);\n_google_genai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst apiKey = process.env.GEMINI_API_KEY;\nif (!apiKey) {\n    console.warn(\"GEMINI_API_KEY not set in environment - API routes will fail without it\");\n}\n// 创建GoogleGenAI实例，只有在有密钥时\nconst ai = apiKey ? new _google_genai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenAI({\n    apiKey\n}) : null;\nasync function handler(req, res) {\n    // Debug: indicate whether server process has the GEMINI_API_KEY (will not log the key)\n    console.log(\"GEMINI_API_KEY present:\", Boolean(process.env.GEMINI_API_KEY));\n    if (req.method !== \"POST\") {\n        res.setHeader(\"Allow\", \"POST\");\n        return res.status(405).json({\n            error: \"Method Not Allowed\"\n        });\n    }\n    try {\n        const { messages, systemInstruction } = req.body;\n        if (!messages || !Array.isArray(messages)) {\n            return res.status(400).json({\n                error: \"Missing messages array in request body\"\n            });\n        }\n        if (!apiKey || !ai) {\n            return res.status(500).json({\n                error: \"Server configuration error: GEMINI_API_KEY not set or invalid\"\n            });\n        }\n        // Build a textual prompt from messages (server side maintains key responsibility: apiKey never exposed)\n        const transcript = messages.map((m)=>`${m.sender === \"user\" ? \"用户\" : \"对方\"}: ${m.text}`).join(\"\\n\");\n        const prompt = `${systemInstruction || \"\"}\\n\\nTranscript:\\n${transcript}\\n\\nRespond as the role-play partner in a natural conversational way.`;\n        // 尝试使用备用模型，添加网络连接测试和超时控制\n        const controller = new AbortController();\n        const timeoutId = setTimeout(()=>controller.abort(), 30000); // 30秒超时\n        let response;\n        try {\n            // 首先尝试使用指定模型\n            response = await ai.models.generateContent({\n                model: \"gemini-2.5-flash\",\n                contents: [\n                    {\n                        role: \"user\",\n                        parts: [\n                            {\n                                text: prompt\n                            }\n                        ]\n                    }\n                ],\n                config: {\n                    temperature: 0.9\n                },\n                signal: controller.signal\n            });\n            clearTimeout(timeoutId);\n        } catch (modelError) {\n            clearTimeout(timeoutId);\n            console.warn(\"Primary model failed, trying fallback...\", modelError);\n            // 如果失败，尝试备用模型\n            try {\n                const fallbackController = new AbortController();\n                const fallbackTimeoutId = setTimeout(()=>fallbackController.abort(), 30000);\n                response = await ai.models.generateContent({\n                    model: \"gemini-1.5-flash\",\n                    contents: [\n                        {\n                            role: \"user\",\n                            parts: [\n                                {\n                                    text: prompt\n                                }\n                            ]\n                        }\n                    ],\n                    config: {\n                        temperature: 0.9\n                    },\n                    signal: fallbackController.signal\n                });\n                clearTimeout(fallbackTimeoutId);\n            } catch (fallbackError) {\n                clearTimeout(timeoutId);\n                throw fallbackError; // 重新抛出以便在外部catch中处理\n            }\n        }\n        // 安全获取文本响应\n        const responseText = response?.response?.candidates?.[0]?.content?.parts?.[0]?.text || response?.text || \"\";\n        return res.status(200).json({\n            text: responseText\n        });\n    } catch (error) {\n        console.error(\"API /api/gemini/chat error:\", error);\n        // 详细记录错误类型和信息\n        const errorDetails = {\n            type: error instanceof Error ? error.name : \"Unknown Error\",\n            message: error instanceof Error ? error.message : String(error),\n            stack: error instanceof Error && \"development\" === \"development\" ? error.stack : undefined\n        };\n        console.error(\"Detailed error information:\", JSON.stringify(errorDetails, null, 2));\n        // 详细的错误分类和响应\n        if (error.name === \"AbortError\") {\n            return res.status(504).json({\n                error: \"网络连接超时：无法连接到Gemini服务。\",\n                details: \"请求处理时间超过了30秒的超时限制。\\n\\n可能的解决方案：\\n1. 检查防火墙设置，确保允许连接到Google API\\n2. 如果使用VPN，请尝试暂时断开\\n3. 检查网络代理设置\\n4. 稍后再试，服务可能暂时不可用\",\n                timestamp: new Date().toISOString()\n            });\n        }\n        if (error.message.includes(\"403\") || error.message.includes(\"unauthorized\")) {\n            return res.status(401).json({\n                error: \"API密钥无效或权限不足\",\n                details: \"提供的Gemini API密钥无效或者没有足够的权限访问指定的资源。\",\n                timestamp: new Date().toISOString()\n            });\n        }\n        if (error.message.includes(\"429\")) {\n            return res.status(429).json({\n                error: \"请求频率过高，请稍后再试\",\n                details: \"您已达到API请求限制。请减少请求频率或稍后再试。\",\n                timestamp: new Date().toISOString()\n            });\n        }\n        if (error.message.includes(\"ENOTFOUND\") || error.message.includes(\"ECONNREFUSED\")) {\n            return res.status(503).json({\n                error: \"网络连接失败：无法连接到Gemini服务。\",\n                details: \"\\n\\n可能的解决方案：\\n1. 检查防火墙设置，确保允许连接到Google API\\n2. 如果使用VPN，请尝试暂时断开\\n3. 检查网络代理设置\\n4. 稍后再试，服务可能暂时不可用\",\n                timestamp: new Date().toISOString()\n            });\n        }\n        if (error.message.includes(\"API key\")) {\n            return res.status(500).json({\n                error: \"服务器配置错误：API密钥无效\",\n                details: \"服务器无法使用提供的API密钥。请检查环境变量配置。\",\n                timestamp: new Date().toISOString()\n            });\n        }\n        if (error instanceof Error && error.message.includes(\"fetch failed\")) {\n            return res.status(500).json({\n                error: \"网络错误连接到Gemini API\",\n                details: \"可能是网络连接问题或Gemini API服务不可用。请检查网络连接并重试。\",\n                timestamp: new Date().toISOString()\n            });\n        }\n        return res.status(500).json({\n            error: \"服务器处理请求时出错\",\n            details: error instanceof Error ? error.message : String(error),\n            timestamp: new Date().toISOString()\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvZ2VtaW5pL2NoYXQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDMEQ7QUFFMUQsTUFBTUMsU0FBU0MsUUFBUUMsR0FBRyxDQUFDQyxjQUFjO0FBRXpDLElBQUksQ0FBQ0gsUUFBUTtJQUNYSSxRQUFRQyxJQUFJLENBQUM7QUFDZjtBQUVBLDBCQUEwQjtBQUMxQixNQUFNQyxLQUFLTixTQUFTLElBQUlELHNEQUFXQSxDQUFDO0lBQUVDO0FBQU8sS0FBSztBQUVuQyxlQUFlTyxRQUFRQyxHQUFtQixFQUFFQyxHQUFvQjtJQUM3RSx1RkFBdUY7SUFDdkZMLFFBQVFNLEdBQUcsQ0FBQywyQkFBMkJDLFFBQVFWLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYztJQUN6RSxJQUFJSyxJQUFJSSxNQUFNLEtBQUssUUFBUTtRQUN6QkgsSUFBSUksU0FBUyxDQUFDLFNBQVM7UUFDdkIsT0FBT0osSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXFCO0lBQzVEO0lBRUEsSUFBSTtRQUNGLE1BQU0sRUFBRUMsUUFBUSxFQUFFQyxpQkFBaUIsRUFBRSxHQUFHVixJQUFJVyxJQUFJO1FBRWhELElBQUksQ0FBQ0YsWUFBWSxDQUFDRyxNQUFNQyxPQUFPLENBQUNKLFdBQVc7WUFDekMsT0FBT1IsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUF5QztRQUNoRjtRQUVBLElBQUksQ0FBQ2hCLFVBQVUsQ0FBQ00sSUFBSTtZQUNsQixPQUFPRyxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQWdFO1FBQ3ZHO1FBRUEsd0dBQXdHO1FBQ3hHLE1BQU1NLGFBQWFMLFNBQVNNLEdBQUcsQ0FBQyxDQUFDQyxJQUFXLENBQUMsRUFBRUEsRUFBRUMsTUFBTSxLQUFLLFNBQVMsT0FBTyxLQUFLLEVBQUUsRUFBRUQsRUFBRUUsSUFBSSxDQUFDLENBQUMsRUFBRUMsSUFBSSxDQUFDO1FBRXBHLE1BQU1DLFNBQVMsQ0FBQyxFQUFFVixxQkFBcUIsR0FBRyxpQkFBaUIsRUFBRUksV0FBVyxxRUFBcUUsQ0FBQztRQUU5SSx5QkFBeUI7UUFDekIsTUFBTU8sYUFBYSxJQUFJQztRQUN2QixNQUFNQyxZQUFZQyxXQUFXLElBQU1ILFdBQVdJLEtBQUssSUFBSSxRQUFRLFFBQVE7UUFFdkUsSUFBSUM7UUFDSixJQUFJO1lBQ0YsYUFBYTtZQUNiQSxXQUFXLE1BQU01QixHQUFHNkIsTUFBTSxDQUFDQyxlQUFlLENBQUM7Z0JBQ3pDQyxPQUFPO2dCQUNQQyxVQUFVO29CQUFDO3dCQUFFQyxNQUFNO3dCQUFRQyxPQUFPOzRCQUFDO2dDQUFFZCxNQUFNRTs0QkFBTzt5QkFBRTtvQkFBQztpQkFBRTtnQkFDdkRhLFFBQVE7b0JBQUVDLGFBQWE7Z0JBQUk7Z0JBQzNCQyxRQUFRZCxXQUFXYyxNQUFNO1lBQzNCO1lBQ0FDLGFBQWFiO1FBQ2YsRUFBRSxPQUFPYyxZQUFZO1lBQ25CRCxhQUFhYjtZQUNiM0IsUUFBUUMsSUFBSSxDQUFDLDRDQUE0Q3dDO1lBQ3pELGNBQWM7WUFDZCxJQUFJO2dCQUNGLE1BQU1DLHFCQUFxQixJQUFJaEI7Z0JBQy9CLE1BQU1pQixvQkFBb0JmLFdBQVcsSUFBTWMsbUJBQW1CYixLQUFLLElBQUk7Z0JBRXZFQyxXQUFXLE1BQU01QixHQUFHNkIsTUFBTSxDQUFDQyxlQUFlLENBQUM7b0JBQ3pDQyxPQUFPO29CQUNQQyxVQUFVO3dCQUFDOzRCQUFFQyxNQUFNOzRCQUFRQyxPQUFPO2dDQUFDO29DQUFFZCxNQUFNRTtnQ0FBTzs2QkFBRTt3QkFBQztxQkFBRTtvQkFDdkRhLFFBQVE7d0JBQUVDLGFBQWE7b0JBQUk7b0JBQzNCQyxRQUFRRyxtQkFBbUJILE1BQU07Z0JBQ25DO2dCQUNBQyxhQUFhRztZQUNmLEVBQUUsT0FBT0MsZUFBZTtnQkFDdEJKLGFBQWFiO2dCQUNiLE1BQU1pQixlQUFlLG9CQUFvQjtZQUMzQztRQUNGO1FBRUEsV0FBVztRQUNYLE1BQU1DLGVBQWVmLFVBQVVBLFVBQVVnQixZQUFZLENBQUMsRUFBRSxFQUFFQyxTQUFTWCxPQUFPLENBQUMsRUFBRSxFQUFFZCxRQUFRUSxVQUFVUixRQUFRO1FBQ3pHLE9BQU9qQixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVXLE1BQU11QjtRQUFhO0lBQ25ELEVBQUUsT0FBT2pDLE9BQU87UUFDZFosUUFBUVksS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsY0FBYztRQUNkLE1BQU1vQyxlQUFlO1lBQ25CQyxNQUFNckMsaUJBQWlCc0MsUUFBUXRDLE1BQU11QyxJQUFJLEdBQUc7WUFDNUNDLFNBQVN4QyxpQkFBaUJzQyxRQUFRdEMsTUFBTXdDLE9BQU8sR0FBR0MsT0FBT3pDO1lBQ3pEMEMsT0FBTzFDLGlCQUFpQnNDLFNBQVNyRCxrQkFBeUIsZ0JBQWdCZSxNQUFNMEMsS0FBSyxHQUFHQztRQUMxRjtRQUVBdkQsUUFBUVksS0FBSyxDQUFDLCtCQUErQjRDLEtBQUtDLFNBQVMsQ0FBQ1QsY0FBYyxNQUFNO1FBRWhGLGFBQWE7UUFDYixJQUFJcEMsTUFBTXVDLElBQUksS0FBSyxjQUFjO1lBQy9CLE9BQU85QyxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUMxQkMsT0FBTztnQkFDUDhDLFNBQVM7Z0JBQ1RDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztZQUNuQztRQUNGO1FBRUEsSUFBSWpELE1BQU13QyxPQUFPLENBQUNVLFFBQVEsQ0FBQyxVQUFVbEQsTUFBTXdDLE9BQU8sQ0FBQ1UsUUFBUSxDQUFDLGlCQUFpQjtZQUMzRSxPQUFPekQsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLE9BQU87Z0JBQ1A4QyxTQUFTO2dCQUNUQyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7WUFDbkM7UUFDRjtRQUVBLElBQUlqRCxNQUFNd0MsT0FBTyxDQUFDVSxRQUFRLENBQUMsUUFBUTtZQUNqQyxPQUFPekQsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLE9BQU87Z0JBQ1A4QyxTQUFTO2dCQUNUQyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7WUFDbkM7UUFDRjtRQUVBLElBQUlqRCxNQUFNd0MsT0FBTyxDQUFDVSxRQUFRLENBQUMsZ0JBQWdCbEQsTUFBTXdDLE9BQU8sQ0FBQ1UsUUFBUSxDQUFDLGlCQUFpQjtZQUNqRixPQUFPekQsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLE9BQU87Z0JBQ1A4QyxTQUFTO2dCQUNUQyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7WUFDbkM7UUFDRjtRQUVBLElBQUlqRCxNQUFNd0MsT0FBTyxDQUFDVSxRQUFRLENBQUMsWUFBWTtZQUNyQyxPQUFPekQsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLE9BQU87Z0JBQ1A4QyxTQUFTO2dCQUNUQyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7WUFDbkM7UUFDRjtRQUVBLElBQUlqRCxpQkFBaUJzQyxTQUFTdEMsTUFBTXdDLE9BQU8sQ0FBQ1UsUUFBUSxDQUFDLGlCQUFpQjtZQUNwRSxPQUFPekQsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLE9BQU87Z0JBQ1A4QyxTQUFTO2dCQUNUQyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7WUFDbkM7UUFDRjtRQUVBLE9BQU94RCxJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxPQUFPO1lBQ1A4QyxTQUFTOUMsaUJBQWlCc0MsUUFBUXRDLE1BQU13QyxPQUFPLEdBQUdDLE9BQU96QztZQUN6RCtDLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztRQUNuQztJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly91bmlzb2NpYWwtLS3lpKflrabnlJ/npL7kuqTnp4HmlZkvLi9wYWdlcy9hcGkvZ2VtaW5pL2NoYXQudHM/NDEwZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IHsgR29vZ2xlR2VuQUksIFR5cGUsIFNjaGVtYSB9IGZyb20gJ0Bnb29nbGUvZ2VuYWknO1xyXG5cclxuY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVk7XHJcblxyXG5pZiAoIWFwaUtleSkge1xyXG4gIGNvbnNvbGUud2FybignR0VNSU5JX0FQSV9LRVkgbm90IHNldCBpbiBlbnZpcm9ubWVudCAtIEFQSSByb3V0ZXMgd2lsbCBmYWlsIHdpdGhvdXQgaXQnKTtcclxufVxyXG5cclxuLy8g5Yib5bu6R29vZ2xlR2VuQUnlrp7kvovvvIzlj6rmnInlnKjmnInlr4bpkqXml7ZcclxuY29uc3QgYWkgPSBhcGlLZXkgPyBuZXcgR29vZ2xlR2VuQUkoeyBhcGlLZXkgfSkgOiBudWxsO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gIC8vIERlYnVnOiBpbmRpY2F0ZSB3aGV0aGVyIHNlcnZlciBwcm9jZXNzIGhhcyB0aGUgR0VNSU5JX0FQSV9LRVkgKHdpbGwgbm90IGxvZyB0aGUga2V5KVxyXG4gIGNvbnNvbGUubG9nKCdHRU1JTklfQVBJX0tFWSBwcmVzZW50OicsIEJvb2xlYW4ocHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkpKTtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XHJcbiAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsICdQT1NUJyk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBOb3QgQWxsb3dlZCcgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBtZXNzYWdlcywgc3lzdGVtSW5zdHJ1Y3Rpb24gfSA9IHJlcS5ib2R5IGFzIHsgbWVzc2FnZXM/OiBBcnJheTxhbnk+OyBzeXN0ZW1JbnN0cnVjdGlvbj86IHN0cmluZyB9O1xyXG5cclxuICAgIGlmICghbWVzc2FnZXMgfHwgIUFycmF5LmlzQXJyYXkobWVzc2FnZXMpKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTWlzc2luZyBtZXNzYWdlcyBhcnJheSBpbiByZXF1ZXN0IGJvZHknIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghYXBpS2V5IHx8ICFhaSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ1NlcnZlciBjb25maWd1cmF0aW9uIGVycm9yOiBHRU1JTklfQVBJX0tFWSBub3Qgc2V0IG9yIGludmFsaWQnIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJ1aWxkIGEgdGV4dHVhbCBwcm9tcHQgZnJvbSBtZXNzYWdlcyAoc2VydmVyIHNpZGUgbWFpbnRhaW5zIGtleSByZXNwb25zaWJpbGl0eTogYXBpS2V5IG5ldmVyIGV4cG9zZWQpXHJcbiAgICBjb25zdCB0cmFuc2NyaXB0ID0gbWVzc2FnZXMubWFwKChtOiBhbnkpID0+IGAke20uc2VuZGVyID09PSAndXNlcicgPyAn55So5oi3JyA6ICflr7nmlrknfTogJHttLnRleHR9YCkuam9pbignXFxuJyk7XHJcblxyXG4gICAgY29uc3QgcHJvbXB0ID0gYCR7c3lzdGVtSW5zdHJ1Y3Rpb24gfHwgJyd9XFxuXFxuVHJhbnNjcmlwdDpcXG4ke3RyYW5zY3JpcHR9XFxuXFxuUmVzcG9uZCBhcyB0aGUgcm9sZS1wbGF5IHBhcnRuZXIgaW4gYSBuYXR1cmFsIGNvbnZlcnNhdGlvbmFsIHdheS5gO1xyXG5cclxuICAgIC8vIOWwneivleS9v+eUqOWkh+eUqOaooeWei++8jOa3u+WKoOe9kee7nOi/nuaOpea1i+ivleWSjOi2heaXtuaOp+WItlxyXG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCAzMDAwMCk7IC8vIDMw56eS6LaF5pe2XHJcbiAgICBcclxuICAgIGxldCByZXNwb25zZTtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOmmluWFiOWwneivleS9v+eUqOaMh+WumuaooeWei1xyXG4gICAgICByZXNwb25zZSA9IGF3YWl0IGFpLm1vZGVscy5nZW5lcmF0ZUNvbnRlbnQoe1xyXG4gICAgICAgIG1vZGVsOiAnZ2VtaW5pLTIuNS1mbGFzaCcsXHJcbiAgICAgICAgY29udGVudHM6IFt7IHJvbGU6ICd1c2VyJywgcGFydHM6IFt7IHRleHQ6IHByb21wdCB9XSB9XSxcclxuICAgICAgICBjb25maWc6IHsgdGVtcGVyYXR1cmU6IDAuOSB9LFxyXG4gICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcclxuICAgICAgfSk7XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgfSBjYXRjaCAobW9kZWxFcnJvcikge1xyXG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgY29uc29sZS53YXJuKCdQcmltYXJ5IG1vZGVsIGZhaWxlZCwgdHJ5aW5nIGZhbGxiYWNrLi4uJywgbW9kZWxFcnJvcik7XHJcbiAgICAgIC8vIOWmguaenOWksei0pe+8jOWwneivleWkh+eUqOaooeWei1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGZhbGxiYWNrQ29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgICAgICBjb25zdCBmYWxsYmFja1RpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gZmFsbGJhY2tDb250cm9sbGVyLmFib3J0KCksIDMwMDAwKTtcclxuICAgICAgICBcclxuICAgICAgICByZXNwb25zZSA9IGF3YWl0IGFpLm1vZGVscy5nZW5lcmF0ZUNvbnRlbnQoe1xyXG4gICAgICAgICAgbW9kZWw6ICdnZW1pbmktMS41LWZsYXNoJyxcclxuICAgICAgICAgIGNvbnRlbnRzOiBbeyByb2xlOiAndXNlcicsIHBhcnRzOiBbeyB0ZXh0OiBwcm9tcHQgfV0gfV0sXHJcbiAgICAgICAgICBjb25maWc6IHsgdGVtcGVyYXR1cmU6IDAuOSB9LFxyXG4gICAgICAgICAgc2lnbmFsOiBmYWxsYmFja0NvbnRyb2xsZXIuc2lnbmFsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KGZhbGxiYWNrVGltZW91dElkKTtcclxuICAgICAgfSBjYXRjaCAoZmFsbGJhY2tFcnJvcikge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICAgIHRocm93IGZhbGxiYWNrRXJyb3I7IC8vIOmHjeaWsOaKm+WHuuS7peS+v+WcqOWklumDqGNhdGNo5Lit5aSE55CGXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDlronlhajojrflj5bmlofmnKzlk43lupRcclxuICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IHJlc3BvbnNlPy5yZXNwb25zZT8uY2FuZGlkYXRlcz8uWzBdPy5jb250ZW50Py5wYXJ0cz8uWzBdPy50ZXh0IHx8IHJlc3BvbnNlPy50ZXh0IHx8ICcnO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgdGV4dDogcmVzcG9uc2VUZXh0IH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdBUEkgL2FwaS9nZW1pbmkvY2hhdCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAvLyDor6bnu4borrDlvZXplJnor6/nsbvlnovlkozkv6Hmga9cclxuICAgIGNvbnN0IGVycm9yRGV0YWlscyA9IHtcclxuICAgICAgdHlwZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm5hbWUgOiAnVW5rbm93biBFcnJvcicsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcclxuICAgICAgc3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY29uc29sZS5lcnJvcignRGV0YWlsZWQgZXJyb3IgaW5mb3JtYXRpb246JywgSlNPTi5zdHJpbmdpZnkoZXJyb3JEZXRhaWxzLCBudWxsLCAyKSk7XHJcbiAgICBcclxuICAgIC8vIOivpue7hueahOmUmeivr+WIhuexu+WSjOWTjeW6lFxyXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDQpLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAn572R57uc6L+e5o6l6LaF5pe277ya5peg5rOV6L+e5o6l5YiwR2VtaW5p5pyN5Yqh44CCJyxcclxuICAgICAgICBkZXRhaWxzOiAn6K+35rGC5aSE55CG5pe26Ze06LaF6L+H5LqGMzDnp5LnmoTotoXml7bpmZDliLbjgIJcXG5cXG7lj6/og73nmoTop6PlhrPmlrnmoYjvvJpcXG4xLiDmo4Dmn6XpmLLngavlopnorr7nva7vvIznoa7kv53lhYHorrjov57mjqXliLBHb29nbGUgQVBJXFxuMi4g5aaC5p6c5L2/55SoVlBO77yM6K+35bCd6K+V5pqC5pe25pat5byAXFxuMy4g5qOA5p+l572R57uc5Luj55CG6K6+572uXFxuNC4g56iN5ZCO5YaN6K+V77yM5pyN5Yqh5Y+v6IO95pqC5pe25LiN5Y+v55SoJyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJzQwMycpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3VuYXV0aG9yaXplZCcpKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IFxyXG4gICAgICAgIGVycm9yOiAnQVBJ5a+G6ZKl5peg5pWI5oiW5p2D6ZmQ5LiN6LazJyxcclxuICAgICAgICBkZXRhaWxzOiAn5o+Q5L6b55qER2VtaW5pIEFQSeWvhumSpeaXoOaViOaIluiAheayoeaciei2s+Wkn+eahOadg+mZkOiuv+mXruaMh+WumueahOi1hOa6kOOAgicsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCc0MjknKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MjkpLmpzb24oeyBcclxuICAgICAgICBlcnJvcjogJ+ivt+axgumikeeOh+i/h+mrmO+8jOivt+eojeWQjuWGjeivlScsXHJcbiAgICAgICAgZGV0YWlsczogJ+aCqOW3sui+vuWIsEFQSeivt+axgumZkOWItuOAguivt+WHj+Wwkeivt+axgumikeeOh+aIlueojeWQjuWGjeivleOAgicsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdFTk9URk9VTkQnKSB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdFQ09OTlJFRlVTRUQnKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDMpLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAn572R57uc6L+e5o6l5aSx6LSl77ya5peg5rOV6L+e5o6l5YiwR2VtaW5p5pyN5Yqh44CCJyxcclxuICAgICAgICBkZXRhaWxzOiAnXFxuXFxu5Y+v6IO955qE6Kej5Yaz5pa55qGI77yaXFxuMS4g5qOA5p+l6Ziy54Gr5aKZ6K6+572u77yM56Gu5L+d5YWB6K646L+e5o6l5YiwR29vZ2xlIEFQSVxcbjIuIOWmguaenOS9v+eUqFZQTu+8jOivt+WwneivleaaguaXtuaWreW8gFxcbjMuIOajgOafpee9kee7nOS7o+eQhuiuvue9rlxcbjQuIOeojeWQjuWGjeivle+8jOacjeWKoeWPr+iDveaaguaXtuS4jeWPr+eUqCcsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdBUEkga2V5JykpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXHJcbiAgICAgICAgZXJyb3I6ICfmnI3liqHlmajphY3nva7plJnor6/vvJpBUEnlr4bpkqXml6DmlYgnLFxyXG4gICAgICAgIGRldGFpbHM6ICfmnI3liqHlmajml6Dms5Xkvb/nlKjmj5DkvpvnmoRBUEnlr4bpkqXjgILor7fmo4Dmn6Xnjq/looPlj5jph4/phY3nva7jgIInLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdmZXRjaCBmYWlsZWQnKSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgIGVycm9yOiAn572R57uc6ZSZ6K+v6L+e5o6l5YiwR2VtaW5pIEFQSScsXHJcbiAgICAgICAgZGV0YWlsczogJ+WPr+iDveaYr+e9kee7nOi/nuaOpemXrumimOaIlkdlbWluaSBBUEnmnI3liqHkuI3lj6/nlKjjgILor7fmo4Dmn6XnvZHnu5zov57mjqXlubbph43or5XjgIInLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcclxuICAgICAgZXJyb3I6ICfmnI3liqHlmajlpITnkIbor7fmsYLml7blh7rplJknLFxyXG4gICAgICBkZXRhaWxzOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkdvb2dsZUdlbkFJIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkdFTUlOSV9BUElfS0VZIiwiY29uc29sZSIsIndhcm4iLCJhaSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJsb2ciLCJCb29sZWFuIiwibWV0aG9kIiwic2V0SGVhZGVyIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwibWVzc2FnZXMiLCJzeXN0ZW1JbnN0cnVjdGlvbiIsImJvZHkiLCJBcnJheSIsImlzQXJyYXkiLCJ0cmFuc2NyaXB0IiwibWFwIiwibSIsInNlbmRlciIsInRleHQiLCJqb2luIiwicHJvbXB0IiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJhYm9ydCIsInJlc3BvbnNlIiwibW9kZWxzIiwiZ2VuZXJhdGVDb250ZW50IiwibW9kZWwiLCJjb250ZW50cyIsInJvbGUiLCJwYXJ0cyIsImNvbmZpZyIsInRlbXBlcmF0dXJlIiwic2lnbmFsIiwiY2xlYXJUaW1lb3V0IiwibW9kZWxFcnJvciIsImZhbGxiYWNrQ29udHJvbGxlciIsImZhbGxiYWNrVGltZW91dElkIiwiZmFsbGJhY2tFcnJvciIsInJlc3BvbnNlVGV4dCIsImNhbmRpZGF0ZXMiLCJjb250ZW50IiwiZXJyb3JEZXRhaWxzIiwidHlwZSIsIkVycm9yIiwibmFtZSIsIm1lc3NhZ2UiLCJTdHJpbmciLCJzdGFjayIsInVuZGVmaW5lZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZXRhaWxzIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiaW5jbHVkZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/gemini/chat.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgemini%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgemini%5Cchat.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();