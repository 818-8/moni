(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(2370)}])},2370:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return N}});var i,n,a,l,o,r,c,d,m=t(5893),u=t(7294);(i=o||(o={})).USER="user",i.AI="model",(n=r||(r={})).EASY="入门",n.MEDIUM="进阶",n.HARD="挑战",(a=c||(c={})).DORM="宿舍关系",a.ACADEMIC="师生沟通",a.ROMANCE="情感恋爱",a.CAREER="社团职场",a.SOCIAL="日常社交",a.INTERPERSONAL="人际交往";let h=[{id:"dorm_conflict_cleaning",title:"室友不打扫卫生",description:"你的室友已经连续两周没有倒垃圾了，宿舍里开始有异味。你需要委婉但坚定地提醒他/她履行值日职责。",category:c.DORM,difficulty:r.MEDIUM,icon:"\uD83E\uDDF9",backgroundImage:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=500&h=300&fit=crop",initialMessage:"（戴着耳机在打游戏）哎呀，别烦我，这局关键呢。垃圾堆那儿又不碍事，明天再说吧。",systemInstruction:'\n      You are playing the role of a college roommate who is lazy and defensive about cleaning. \n      The user is your roommate trying to ask you to clean up the trash.\n      \n      Personality traits:\n      - A bit selfish, focused on gaming.\n      - Defensive when criticized.\n      - Will make excuses like "I\'m busy", "It\'s not that dirty", "I\'ll do it later".\n      - However, if the user communicates effectively (using "I" statements, being firm but polite, offering a compromise), you will eventually agree.\n      \n      Rules:\n      - Reply in Chinese (Simplified).\n      - Keep responses short (under 50 words) to mimic casual conversation.\n      - Do not give in immediately. Make the user work for it.\n    '},{id:"academic_extension",title:"向严厉教授请假",description:"期末作业截止日期是明天，但你因为突发生病没法完成。你需要向以严厉著称的王教授申请延期两天。",category:c.ACADEMIC,difficulty:r.HARD,icon:"\uD83D\uDC68‍\uD83C\uDFEB",backgroundImage:"https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=500&h=300&fit=crop",initialMessage:"进来。有什么事快说，我马上有个会。如果是关于明天截止的作业，除非你有极其特殊的理由，否则免谈。",systemInstruction:'\n      You are Professor Wang, a strict and busy academic professor.\n      The user is a student asking for an assignment extension.\n\n      Personality traits:\n      - Impatient, values efficiency and integrity.\n      - Dislikes excuses like "I forgot" or "I was busy with other clubs".\n      - Respects honesty and evidence (e.g., medical certificate).\n      \n      Rules:\n      - Reply in Chinese (Simplified).\n      - Be intimidating initially.\n      - If the user is respectful, concise, and provides a valid reason (illness) with a promise of proof, you can grant the extension but with a penalty or warning.\n    '},{id:"romance_confession",title:"婉拒追求者",description:"一个关系不错的异性朋友突然向你表白，但你只把他/她当朋友。你需要得体地拒绝，尽量不伤害这段友情。",category:c.ROMANCE,difficulty:r.HARD,icon:"\uD83D\uDC8C",backgroundImage:"https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=500&h=300&fit=crop",initialMessage:"其实...我喜欢你很久了。我知道这很突然，但我想知道，我们有没有可能在一起？",systemInstruction:"\n      You are a close friend of the user who has just confessed romantic feelings.\n      The user wants to reject you politely.\n\n      Personality traits:\n      - Vulnerable, nervous, hopeful.\n      - Value the friendship but want more.\n      \n      Rules:\n      - Reply in Chinese (Simplified).\n      - If the user is too harsh, act hurt and distant.\n      - If the user is too vague, keep pushing for a chance.\n      - If the user is kind, firm, and emphasizes the value of friendship, accept the rejection with grace but sadness.\n    "},{id:"career_networking",title:"社团面试自我介绍",description:"你正在参加全校最热门的辩论队的面试。请在简短的互动中展示你的逻辑思维和自信，回答学长刁钻的问题。",category:c.CAREER,difficulty:r.MEDIUM,icon:"\uD83C\uDFA4",backgroundImage:"https://images.unsplash.com/photo-1573164713988-8665fc963095?w=500&h=300&fit=crop",initialMessage:"坐吧。看你的简历，你并没有辩论经验。那你凭什么觉得你能胜任我们辩论队的高强度训练？",systemInstruction:"\n      You are a senior student leader of the Debate Team.\n      The user is a freshman interviewing for a spot.\n\n      Personality traits:\n      - Sharp, critical, looks for quick thinking.\n      - Will challenge the user's statements.\n      \n      Rules:\n      - Reply in Chinese (Simplified).\n      - Ask follow-up questions to test logic.\n      - Evaluate confidence.\n    "},{id:"social_party",title:"社恐破冰",description:"在一次跨学院的联谊活动上，你谁都不认识。旁边站着一个看起来也很落单的同学，试着开启话题。",category:c.SOCIAL,difficulty:r.EASY,icon:"\uD83E\uDD64",backgroundImage:"https://images.unsplash.com/photo-1513002749550-c59d786b8e6c?w=500&h=300&fit=crop",initialMessage:"（低头看着手机，看起来有点尴尬）...呃，这人好多啊。",systemInstruction:"\n      You are a shy student at a party who doesn't know anyone.\n      The user is trying to strike up a conversation.\n\n      Personality traits:\n      - Introverted, awkward, but relieved if someone talks to them.\n      - Give short answers initially.\n      - Open up if the user finds a common interest (games, major, hometown, food).\n      \n      Rules:\n      - Reply in Chinese (Simplified).\n    "},{id:"interpersonal_misunderstanding",title:"化解朋友误会",description:"你的好朋友最近对你很冷淡，原来是因为你之前开玩笑说他“重色轻友”让他当真了。你需要解释清楚那只是玩笑，并修复这段关系。",category:c.INTERPERSONAL,difficulty:r.MEDIUM,icon:"\uD83E\uDD1D",backgroundImage:"https://images.unsplash.com/photo-1536535562139-d7523c630e7d?w=500&h=300&fit=crop",initialMessage:"（冷冷地）找我干嘛？既然我在你心里就是那种重色轻友的人，还需要跟我这种人做朋友吗？",systemInstruction:'\n      You are a close friend of the user who is hurt and angry.\n      The user previously made a joke calling you "someone who values romance over friendship" (重色轻友), and you took it seriously.\n      \n      Personality traits:\n      - Sensitive, loyal, currently feeling betrayed.\n      - Defensive and slightly passive-aggressive initially.\n      - Needs genuine reassurance and an apology, not just "it was a joke".\n      \n      Rules:\n      - Reply in Chinese (Simplified).\n      - If the user apologizes sincerely and validates your feelings, start to soften.\n      - If the user says "you are too sensitive" or just "it was a joke", get angrier.\n    '}],x={ALL:["全面提升大学生核心软实力","构建自信、得体、高情商的沟通风格","在多元场景中游刃有余"],[c.DORM]:["学会建立界限与维护个人空间","掌握非暴力沟通技巧解决生活摩擦","培养换位思考能力，理解室友立场"],[c.ACADEMIC]:["提升向上管理的沟通自信","学习专业且礼貌的邮件/口头表达范式","在压力下保持逻辑清晰与情绪稳定"],[c.ROMANCE]:["练习表达真实情感而不失分寸","学习在拒绝或被拒绝时维护双方尊严","识别并建立健康的情感边界"],[c.CAREER]:["提升自我推销与个人陈述能力","应对高压面试环境与刁钻提问","展现职业素养与团队合作精神"],[c.SOCIAL]:["克服社交焦虑，从容开启对话","掌握破冰技巧与闲聊（Small Talk）艺术","学习倾听并寻找共同话题"],[c.INTERPERSONAL]:["有效化解误会与修复人际关系","提升处理人际冲突的成熟度","练习真诚道歉与表达原谅"]};var g=e=>{let{scenario:s,onClick:t,onUpdateDescription:i}=e,[n,a]=(0,u.useState)(!1),[l,o]=(0,u.useState)(s.description);return(0,m.jsxs)("div",{onClick:()=>!n&&t(s),className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 border border-slate-100 p-5 flex flex-col h-full group relative overflow-hidden ".concat(n?"cursor-default":"cursor-pointer active:scale-95"),style:{backgroundImage:s.backgroundImage?"url(".concat(s.backgroundImage,")"):"none",backgroundSize:"cover",backgroundPosition:"center"},children:[s.backgroundImage&&(0,m.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/80 to-white/50 z-0"}),(0,m.jsxs)("div",{className:"flex justify-between items-start mb-3 relative z-10",children:[(0,m.jsx)("div",{className:"text-4xl group-hover:scale-110 transition-transform duration-300",children:s.icon}),(0,m.jsx)("span",{className:"text-xs font-semibold px-2 py-1 rounded-full border ".concat((e=>{switch(e){case r.EASY:return"bg-green-100 text-green-700 border-green-200";case r.MEDIUM:return"bg-yellow-100 text-yellow-700 border-yellow-200";case r.HARD:return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700"}})(s.difficulty)),children:s.difficulty})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center mb-2 relative z-10",children:[(0,m.jsx)("h3",{className:"text-lg font-bold text-slate-800",children:s.title}),!n&&i&&(0,m.jsx)("button",{onClick:e=>{e.stopPropagation(),o(s.description),a(!0)},className:"text-slate-400 hover:text-indigo-600 p-1 rounded-full hover:bg-indigo-50 transition-colors opacity-0 group-hover:opacity-100 focus:opacity-100",title:"编辑描述",children:(0,m.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),n?(0,m.jsxs)("div",{className:"flex-grow flex flex-col mb-4 relative z-10",children:[(0,m.jsx)("textarea",{value:l,onChange:e=>o(e.target.value),onClick:e=>{e.stopPropagation()},className:"w-full text-sm text-slate-700 border border-indigo-300 rounded-lg p-2 focus:ring-2 focus:ring-indigo-200 focus:border-indigo-500 outline-none resize-none bg-slate-50 mb-2 h-24",autoFocus:!0}),(0,m.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,m.jsx)("button",{onClick:e=>{e.stopPropagation(),a(!1),o(s.description)},className:"text-xs px-3 py-1.5 rounded-md text-slate-500 hover:bg-slate-100 font-medium transition-colors",children:"取消"}),(0,m.jsx)("button",{onClick:e=>{e.stopPropagation(),i&&i(s.id,l),a(!1)},className:"text-xs px-3 py-1.5 rounded-md bg-indigo-600 text-white hover:bg-indigo-700 font-medium transition-colors shadow-sm",children:"保存"})]})]}):(0,m.jsx)("p",{className:"text-slate-500 text-sm line-clamp-3 mb-4 flex-grow relative z-10",children:s.description}),(0,m.jsxs)("div",{className:"mt-auto pt-3 border-t border-slate-50 flex justify-between items-center",children:[(0,m.jsx)("span",{className:"text-xs text-slate-400 font-medium",children:s.category}),!n&&(0,m.jsx)("span",{className:"text-indigo-600 text-sm font-semibold group-hover:translate-x-1 transition-transform",children:"开始练习 →"})]})]})},f=e=>{let{scenario:s,onEndSession:t,onBack:i}=e,[n,a]=(0,u.useState)([]),[l,r]=(0,u.useState)(""),[c,d]=(0,u.useState)(!1),h=(0,u.useRef)(null);(0,u.useEffect)(()=>{a([{id:"init-1",text:s.initialMessage,sender:o.AI,timestamp:new Date}])},[s]),(0,u.useEffect)(()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[n,c]);let x=async()=>{if(!l.trim()||c)return;let e=l.trim();r("");let t={id:Date.now().toString(),text:e,sender:o.USER,timestamp:new Date};a(e=>[...e,t]),d(!0);try{let e={messages:[...n,t],systemInstruction:s.systemInstruction},l=new AbortController,r=setTimeout(()=>l.abort(),3e4),c=await fetch("/api/gemini/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),signal:l.signal});clearTimeout(r);let d="（对方未回应）";if(c.ok){let e=await c.json();d=(null==e?void 0:e.text)||d}else try{var i,m;let e=await c.json();d=(null==e?void 0:null===(i=e.error)||void 0===i?void 0:i.includes("Network error"))?"网络连接问题：无法连接到Gemini服务。".concat((null==e?void 0:e.details)?"\n技术原因："+String(e.details).slice(0,150):""):(null==e?void 0:null===(m=e.error)||void 0===m?void 0:m.includes("API key"))?"服务配置问题：API密钥无效。".concat((null==e?void 0:e.details)?"\n技术原因："+String(e.details).slice(0,150):""):"系统错误：".concat((null==e?void 0:e.error)||"请求失败").concat((null==e?void 0:e.details)?"\n"+String(e.details).slice(0,200):"")}catch(e){d="系统错误：HTTP ".concat(c.status)}let u={id:(Date.now()+1).toString(),text:d,sender:o.AI,timestamp:new Date};a(e=>[...e,u])}catch(t){console.error("Chat request failed:",t);let e="网络错误：无法连接到服务器，请检查网络或稍后重试。";t instanceof Error&&(e="AbortError"===t.name?"请求超时：服务器响应时间过长，请稍后重试。":t.message.includes("fetch failed")||t.message.includes("Network")?"网络连接失败：无法连接到Gemini服务。\n\n可能的解决方案：\n1. 检查防火墙设置，确保允许连接到Google API\n2. 如果使用VPN，请尝试暂时断开\n3. 检查网络代理设置\n4. 稍后再试，服务可能暂时不可用":"通信错误：".concat(t.message.slice(0,100)));let s={id:(Date.now()+2).toString(),text:e,sender:o.AI,timestamp:new Date};a(e=>[...e,s])}finally{d(!1)}};return(0,m.jsxs)("div",{className:"flex flex-col h-full bg-slate-50 relative",children:[(0,m.jsxs)("div",{className:"bg-white border-b border-slate-200 px-4 py-3 flex items-center justify-between shadow-sm z-10",children:[(0,m.jsx)("button",{onClick:i,className:"text-slate-500 hover:text-slate-800 p-2 rounded-full hover:bg-slate-100 transition-colors",children:(0,m.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("h2",{className:"font-bold text-slate-800",children:s.title}),(0,m.jsx)("p",{className:"text-xs text-slate-500",children:"正在与 AI 角色对话中..."})]}),(0,m.jsx)("button",{onClick:()=>t(n),className:"bg-indigo-600 hover:bg-indigo-700 text-white text-xs px-3 py-1.5 rounded-full font-medium transition-colors shadow-sm",children:"结束并评估"})]}),(0,m.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide",children:[(0,m.jsx)("div",{className:"flex justify-center my-4",children:(0,m.jsxs)("div",{className:"bg-slate-200 text-slate-600 text-xs py-1 px-4 rounded-full max-w-[90%] text-center relative overflow-hidden",children:[(0,m.jsx)("div",{className:"absolute inset-0 opacity-15 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321497487-e288fb19713f?w=500&h=300&fit=crop')"}}),(0,m.jsxs)("div",{className:"relative z-10",children:["场景目标：",s.description]})]})}),n.map(e=>(0,m.jsx)("div",{className:"flex w-full ".concat(e.sender===o.USER?"justify-end":"justify-start"),children:(0,m.jsxs)("div",{className:"\n              max-w-[80%] rounded-2xl px-4 py-3 text-sm leading-relaxed shadow-sm relative overflow-hidden\n              ".concat(e.sender===o.USER?"bg-indigo-600 text-white rounded-br-none":"bg-white text-slate-800 border border-slate-200 rounded-bl-none","\n            "),children:[(0,m.jsx)("div",{className:"absolute inset-0 opacity-".concat(e.sender===o.USER?"20":"10"," bg-cover bg-center"),style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321497487-e288fb19713f?w=500&h=300&fit=crop')"}}),(0,m.jsx)("div",{className:"relative z-10",children:e.text})]})},e.id)),c&&(0,m.jsx)("div",{className:"flex justify-start w-full",children:(0,m.jsxs)("div",{className:"bg-white border border-slate-200 rounded-2xl rounded-bl-none px-4 py-3 shadow-sm flex space-x-1 items-center relative overflow-hidden",children:[(0,m.jsx)("div",{className:"absolute inset-0 opacity-10 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321497487-e288fb19713f?w=500&h=300&fit=crop')"}}),(0,m.jsxs)("div",{className:"relative z-10",children:[(0,m.jsx)("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,m.jsx)("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,m.jsx)("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})}),(0,m.jsx)("div",{ref:h})]}),(0,m.jsx)("div",{className:"bg-white border-t border-slate-200 p-4 pb-6 md:pb-4",children:(0,m.jsxs)("div",{className:"flex items-end gap-2 max-w-4xl mx-auto",children:[(0,m.jsx)("div",{className:"flex-1 bg-slate-100 rounded-2xl p-2 focus-within:ring-2 focus-within:ring-indigo-500 focus-within:bg-white transition-all",children:(0,m.jsx)("textarea",{value:l,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),x())},placeholder:"输入你的回复...",className:"w-full bg-transparent border-none outline-none text-slate-800 text-sm px-2 resize-none max-h-32 overflow-y-auto",rows:1,style:{minHeight:"24px"}})}),(0,m.jsx)("button",{onClick:x,disabled:!l.trim()||c,className:"\n              p-3 rounded-full flex-shrink-0 transition-all\n              ".concat(!l.trim()||c?"bg-slate-200 text-slate-400 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg hover:scale-105 active:scale-95","\n            "),children:(0,m.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,m.jsx)("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),(0,m.jsx)("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})})]})},p=t(289),b=t(8613),v=t(114),y=t(4489),w=e=>{var s;let{messages:t,scenario:i,onClose:n,onRetry:a}=e,[l,o]=(0,u.useState)(null),[r,c]=(0,u.useState)(!0);if((0,u.useEffect)(()=>{(async()=>{if(t.length<3){o({score:0,summary:"对话太短，无法进行有效分析。请尝试多交流几句。",strengths:[],improvements:["请尝试多说几句话。","不要过早结束对话。"],toneAnalysis:"样本不足"}),c(!1);return}try{let e=new AbortController,s=setTimeout(()=>e.abort(),4e4),n=await fetch("/api/gemini/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({scenarioTitle:i.title,messages:t}),signal:e.signal});if(clearTimeout(s),n.ok){let e=await n.json();o(e)}else try{let e=await n.json();console.error("Analysis API error:",e),o({score:50,summary:"分析服务暂时不可用：".concat((null==e?void 0:e.error)||"服务器错误"),strengths:["对话已完成"],improvements:["请稍后重新尝试分析功能"],toneAnalysis:"分析过程中断"})}catch(e){o({score:50,summary:"分析服务暂时不可用：HTTP ".concat(n.status),strengths:["对话已完成"],improvements:["请稍后重新尝试分析功能"],toneAnalysis:"分析过程中断"})}}catch(s){console.error("Analysis fetch failed:",s);let e="分析服务暂时不可用，请稍后重试";s instanceof Error&&(e="AbortError"===s.name?"分析请求超时，请稍后重试":s.message.includes("fetch failed")||s.message.includes("Network")?"网络连接问题，无法完成分析":"分析过程中发生错误: ".concat(s.message.slice(0,50))),o({score:50,summary:e,strengths:["对话已完成"],improvements:["请尝试重新分析或检查网络连接"],toneAnalysis:"分析过程中断"})}finally{c(!1)}})()},[]),r)return(0,m.jsxs)("div",{className:"flex flex-col items-center justify-center h-full bg-slate-50 p-6 space-y-6",children:[(0,m.jsx)("div",{className:"w-16 h-16 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"}),(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("h3",{className:"text-xl font-semibold text-slate-800",children:"正在分析你的表现..."}),(0,m.jsx)("p",{className:"text-slate-500 mt-2",children:"AI 教练正在评估你的沟通技巧、语气和共情能力。"})]})]});if(!l)return null;let d=[{name:"Score",value:l.score},{name:"Remaining",value:100-l.score}];return(0,m.jsx)("div",{className:"h-full bg-slate-50 overflow-y-auto",children:(0,m.jsxs)("div",{className:"max-w-2xl mx-auto p-4 md:p-8 space-y-6",children:[(0,m.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6 flex flex-col items-center md:flex-row md:justify-between border border-slate-100",children:[(0,m.jsxs)("div",{className:"mb-6 md:mb-0 text-center md:text-left",children:[(0,m.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"评估报告"}),(0,m.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:i.title}),(0,m.jsxs)("p",{className:"text-xs text-slate-400 mt-1",children:["共 ",t.length," 条对话记录"]})]}),(0,m.jsxs)("div",{className:"relative w-32 h-32 flex items-center justify-center",children:[(0,m.jsx)(p.h,{width:"100%",height:"100%",children:(0,m.jsx)(b.u,{children:(0,m.jsxs)(v.by,{data:d,cx:"50%",cy:"50%",innerRadius:35,outerRadius:50,startAngle:90,endAngle:-270,dataKey:"value",stroke:"none",children:[(0,m.jsx)(y.b,{fill:(s=l.score)>=80?"#4f46e5":s>=60?"#eab308":"#ef4444"},"score"),(0,m.jsx)(y.b,{fill:"#f1f5f9"},"remaining")]})})}),(0,m.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[(0,m.jsx)("span",{className:"text-2xl font-bold text-slate-800",children:l.score}),(0,m.jsx)("span",{className:"text-[10px] text-slate-400 uppercase",children:"Score"})]})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6 border border-slate-100 relative overflow-hidden",children:[(0,m.jsx)("div",{className:"absolute inset-0 opacity-10 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321497487-e288fb19713f?w=500&h=300&fit=crop')"}}),(0,m.jsxs)("div",{className:"relative z-10",children:[(0,m.jsxs)("h3",{className:"font-semibold text-slate-800 mb-2 flex items-center gap-2",children:[(0,m.jsx)("span",{className:"text-xl",children:"\uD83D\uDCDD"})," 总结"]}),(0,m.jsx)("p",{className:"text-sm text-slate-600 leading-relaxed",children:l.summary})]})]}),(0,m.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6 border border-slate-100 relative overflow-hidden",children:[(0,m.jsx)("div",{className:"absolute inset-0 opacity-10 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321497487-e288fb19713f?w=500&h=300&fit=crop')"}}),(0,m.jsxs)("div",{className:"relative z-10",children:[(0,m.jsxs)("h3",{className:"font-semibold text-slate-800 mb-2 flex items-center gap-2",children:[(0,m.jsx)("span",{className:"text-xl",children:"\uD83C\uDFAD"})," 语气分析"]}),(0,m.jsx)("p",{className:"text-sm text-slate-600 leading-relaxed",children:l.toneAnalysis})]})]})]}),(0,m.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6 border border-slate-100 relative overflow-hidden",children:[(0,m.jsx)("div",{className:"absolute inset-0 opacity-10 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321497487-e288fb19713f?w=500&h=300&fit=crop')"}}),(0,m.jsxs)("div",{className:"relative z-10",children:[(0,m.jsxs)("h3",{className:"font-semibold text-green-700 mb-4 flex items-center gap-2",children:[(0,m.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"表现亮点"]}),(0,m.jsx)("ul",{className:"space-y-3",children:l.strengths.map((e,s)=>(0,m.jsxs)("li",{className:"flex items-start gap-3 text-sm text-slate-700",children:[(0,m.jsx)("span",{className:"bg-green-100 text-green-600 rounded-full w-5 h-5 flex items-center justify-center text-xs flex-shrink-0 mt-0.5",children:s+1}),e]},s))})]})]}),(0,m.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6 border border-slate-100 relative overflow-hidden",children:[(0,m.jsx)("div",{className:"absolute inset-0 opacity-10 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321497487-e288fb19713f?w=500&h=300&fit=crop')"}}),(0,m.jsxs)("div",{className:"relative z-10",children:[(0,m.jsxs)("h3",{className:"font-semibold text-orange-600 mb-4 flex items-center gap-2",children:[(0,m.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"提升建议"]}),(0,m.jsx)("ul",{className:"space-y-3",children:l.improvements.map((e,s)=>(0,m.jsxs)("li",{className:"flex items-start gap-3 text-sm text-slate-700",children:[(0,m.jsx)("span",{className:"bg-orange-100 text-orange-600 rounded-full w-5 h-5 flex items-center justify-center text-xs flex-shrink-0 mt-0.5",children:s+1}),e]},s))})]})]}),(0,m.jsxs)("div",{className:"flex gap-4 pt-4 pb-8",children:[(0,m.jsx)("button",{onClick:a,className:"flex-1 bg-white border border-slate-300 text-slate-700 font-medium py-3 rounded-xl hover:bg-slate-50 transition-colors",children:"重新挑战"}),(0,m.jsx)("button",{onClick:n,className:"flex-1 bg-indigo-600 text-white font-medium py-3 rounded-xl hover:bg-indigo-700 transition-colors shadow-md hover:shadow-lg",children:"返回首页"})]})]})})};(l=d||(d={})).HOME="home",l.CHAT="chat",l.ANALYSIS="analysis";var j=()=>{var e;let[s,t]=(0,u.useState)("home"),[i,n]=(0,u.useState)(null),[a,l]=(0,u.useState)([]),[o,r]=(0,u.useState)("ALL"),[d,p]=(0,u.useState)(h),b=e=>{n(e),t("chat")},v=()=>{n(null),l([]),t("home")},y=(e,s)=>{p(t=>t.map(t=>t.id===e?{...t,description:s}:t))},j=d.filter(e=>"ALL"===o||e.category===o);return(0,m.jsxs)("div",{className:"h-full w-full bg-slate-50 text-slate-900 font-sans",children:["home"===s&&(0,m.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,m.jsx)("header",{className:"bg-white border-b border-slate-100 py-6 px-4 md:px-8 flex-shrink-0 z-10",children:(0,m.jsxs)("div",{className:"max-w-5xl mx-auto flex justify-between items-center",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{className:"text-2xl font-bold text-slate-900 bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600",children:"UniSocial"}),(0,m.jsx)("p",{className:"text-sm text-slate-500",children:"大学生社交私教"})]}),(0,m.jsx)("div",{className:"hidden md:block text-xs bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full font-medium",children:"Beta Version"})]})}),(0,m.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:(0,m.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,m.jsxs)("div",{className:"flex gap-2 mb-8 overflow-x-auto pb-2 scrollbar-hide",children:[(0,m.jsx)("button",{onClick:()=>r("ALL"),className:"px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ".concat("ALL"===o?"bg-indigo-600 text-white shadow-md":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"),children:"全部场景"}),Object.values(c).map(e=>(0,m.jsx)("button",{onClick:()=>r(e),className:"px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ".concat(o===e?"bg-indigo-600 text-white shadow-md":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"),children:e},e))]}),(0,m.jsxs)("div",{className:"mb-8 bg-gradient-to-br from-indigo-50 to-white p-6 rounded-2xl border border-indigo-100 shadow-sm relative overflow-hidden",children:[(0,m.jsx)("div",{className:"absolute top-0 right-0 -mt-8 -mr-8 w-32 h-32 bg-white rounded-full opacity-40 blur-2xl"}),(0,m.jsxs)("h2",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center relative z-10",children:[(0,m.jsx)("span",{className:"bg-indigo-600 text-white p-1.5 rounded-lg mr-2 shadow-sm",children:(0,m.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),"ALL"===o?"综合能力训练目标":"".concat(o,"能力重点")]}),(0,m.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 relative z-10",children:null===(e=x[o])||void 0===e?void 0:e.map((e,s)=>(0,m.jsxs)("div",{className:"flex items-start relative bg-white/80 backdrop-blur-sm p-3 rounded-xl border border-indigo-50 shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[(0,m.jsx)("div",{className:"absolute inset-0 opacity-5 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321497487-e288fb19713f?w=500&h=300&fit=crop')"}}),(0,m.jsx)("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center bg-indigo-100 text-indigo-600 rounded-full text-xs font-bold mr-3 mt-0.5 relative z-10",children:s+1}),(0,m.jsx)("p",{className:"text-sm text-slate-600 font-medium leading-relaxed relative z-10",children:e})]},s))})]}),(0,m.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(e=>(0,m.jsx)("div",{className:"h-full",children:(0,m.jsx)(g,{scenario:e,onClick:b,onUpdateDescription:y})},e.id))}),0===j.length&&(0,m.jsx)("div",{className:"text-center py-20",children:(0,m.jsx)("p",{className:"text-slate-400",children:"该分类下暂无场景。"})})]})})]}),"chat"===s&&i&&(0,m.jsx)(f,{scenario:i,onEndSession:e=>{l(e),t("analysis")},onBack:v}),"analysis"===s&&i&&(0,m.jsx)(w,{messages:a,scenario:i,onClose:v,onRetry:()=>{l([]),t("chat")}})]})};function N(){return(0,m.jsx)(j,{})}}},function(e){e.O(0,[177,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);